<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>诊断</title>
</head>
<body>
    <h1>诊断原始游戏加载问题</h1>
    <div id="log"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>
    
    <script type="module">
        const log = document.getElementById('log');
        
        function addLog(msg) {
            const div = document.createElement('div');
            div.textContent = msg;
            log.appendChild(div);
            console.log(msg);
        }
        
        addLog('开始诊断...');
        
        // 等待Phaser加载
        setTimeout(async () => {
            if (typeof Phaser === 'undefined') {
                addLog('❌ Phaser未加载');
                return;
            }
            
            addLog('✅ Phaser已加载');
            
            try {
                addLog('尝试导入 main.js...');
                const module = await import('./src/main.js');
                addLog('✅ main.js 导入成功！');
                addLog('游戏应该正常运行了');
            } catch (error) {
                addLog(`❌ main.js 导入失败: ${error.message}`);
                addLog(`错误堆栈: ${error.stack}`);
                
                // 尝试逐个导入场景
                const scenes = [
                    'PreloadScene',
                    'BootScene', 
                    'MainMenuScene',
                    'LoginScene',
                    'LoadingScene',
                    'GameScene'
                ];
                
                for (const scene of scenes) {
                    try {
                        addLog(`尝试导入 ${scene}...`);
                        await import(`./src/scenes/${scene}.js`);
                        addLog(`✅ ${scene} 导入成功`);
                    } catch (err) {
                        addLog(`❌ ${scene} 导入失败: ${err.message}`);
                        break;
                    }
                }
            }
        }, 1000);
    </script>
</body>
</html>