# Cloudflare Pages æ­£ç¡®é…ç½®

## âŒ å½“å‰é—®é¢˜

æ‚¨çš„é…ç½®ä¸­æœ‰ä¸€ä¸ªé”™è¯¯ï¼š
- **æ„å»ºå‘½ä»¤**ï¼š`npm å®‰è£…` âŒï¼ˆè¿™æ˜¯ä¸­æ–‡ï¼Œåº”è¯¥æ”¹ä¸ºè‹±æ–‡ï¼‰

## âœ… æ­£ç¡®çš„å®Œæ•´é…ç½®

è¯·åœ¨ Cloudflare Dashboard ä¸­æŒ‰ä»¥ä¸‹é…ç½®ï¼š

```
Framework preset: None
æ„å»ºå‘½ä»¤ (Build command): npm install --force
éƒ¨ç½²å‘½ä»¤ (Deploy command): echo "æ­£åœ¨é€šè¿‡ Cloudflare Pages è‡ªåŠ¨éƒ¨ç½²è¿›è¡Œéƒ¨ç½²"
æ„å»ºè¾“å‡ºç›®å½• (Build output directory): .
æ ¹ç›®å½• (Root directory): /
éç”Ÿäº§åˆ†æ”¯éƒ¨ç½²å‘½ä»¤ (Non-production branch deploy command): echo "Deploying preview..."
```

## ğŸ“ è¯¦ç»†è¯´æ˜

### 1. æ„å»ºå‘½ä»¤ (Build command)
```
npm install --force
```
- **é‡è¦**ï¼šå¿…é¡»ä½¿ç”¨è‹±æ–‡ `npm install`ï¼Œä¸èƒ½ä½¿ç”¨ä¸­æ–‡ `npm å®‰è£…`
- `--force` å‚æ•°å¯ä»¥å¼ºåˆ¶é‡æ–°å®‰è£…ï¼Œå¿½ç•¥ç¼“å­˜é—®é¢˜
- è¿™ä¼šå®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆphaser, wrangler ç­‰ï¼‰

### 2. éƒ¨ç½²å‘½ä»¤ (Deploy command)
```
echo "æ­£åœ¨é€šè¿‡ Cloudflare Pages è‡ªåŠ¨éƒ¨ç½²è¿›è¡Œéƒ¨ç½²"
```
- âœ… è¿™ä¸ªé…ç½®æ˜¯æ­£ç¡®çš„
- å ä½ç¬¦å‘½ä»¤ï¼Œä¸ä¼šæ‰§è¡Œå®é™…éƒ¨ç½²
- Cloudflare Pages ä¼šè‡ªåŠ¨éƒ¨ç½²é™æ€æ–‡ä»¶

### 3. æ„å»ºè¾“å‡ºç›®å½• (Build output directory)
```
.
```
- **é‡è¦**ï¼šå¿…é¡»è®¾ç½®ä¸º `.`ï¼ˆå½“å‰ç›®å½•ï¼‰
- å¦‚æœè®¾ç½®ä¸ºå…¶ä»–ç›®å½•ï¼ˆå¦‚ `dist`ã€`build`ï¼‰ï¼Œå¯èƒ½æ‰¾ä¸åˆ° `index.html`
- æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨æ ¹ç›®å½•ï¼Œæ‰€ä»¥è¾“å‡ºç›®å½•å°±æ˜¯å½“å‰ç›®å½•

### 4. æ ¹ç›®å½• (Root directory)
```
/
```
- âœ… è¿™ä¸ªé…ç½®æ˜¯æ­£ç¡®çš„
- æˆ–è€…å¯ä»¥ç•™ç©ºï¼ˆå¦‚æœå…è®¸ï¼‰

### 5. éç”Ÿäº§åˆ†æ”¯éƒ¨ç½²å‘½ä»¤ (Non-production branch deploy command)
```
echo "Deploying preview..."
```
- å¦‚æœå­—æ®µæ— æ³•ç•™ç©ºï¼Œä½¿ç”¨è¿™ä¸ªå ä½ç¬¦å‘½ä»¤
- ä¸ä¼šæ‰§è¡Œå®é™…éƒ¨ç½²æ“ä½œ

## ğŸ”§ ä¿®å¤æ­¥éª¤

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. è¿›å…¥ **Pages** â†’ ä½ çš„é¡¹ç›® â†’ **Settings** â†’ **Builds & deployments**
3. æ‰¾åˆ° "æ„å»ºå‘½ä»¤" (Build command) å­—æ®µ
4. **ä¿®æ”¹ä¸º**ï¼š`npm install --force`
5. ç¡®è®¤ "æ„å»ºè¾“å‡ºç›®å½•" (Build output directory) è®¾ç½®ä¸º `.`
6. ç¡®è®¤ "éç”Ÿäº§åˆ†æ”¯éƒ¨ç½²å‘½ä»¤" (Non-production branch deploy command) è®¾ç½®ä¸º `echo "Deploying preview..."`
7. ä¿å­˜è®¾ç½®
8. è§¦å‘æ–°çš„éƒ¨ç½²

## âš ï¸ ä¸ºä»€ä¹ˆä½¿ç”¨ `--force`ï¼Ÿ

1. **è§£å†³ç¼“å­˜é—®é¢˜**ï¼š`--force` å¯ä»¥å¼ºåˆ¶é‡æ–°å®‰è£…ï¼Œå¿½ç•¥ç¼“å­˜çš„æ—§ç‰ˆæœ¬
2. **ç‰ˆæœ¬åŒæ­¥**ï¼šç¡®ä¿å®‰è£…çš„åŒ…ç‰ˆæœ¬ä¸ `package-lock.json` åŒ¹é…
3. **é¿å…é”™è¯¯**ï¼šé˜²æ­¢ `npm ci` å› ä¸ºç‰ˆæœ¬ä¸åŒ¹é…è€Œå¤±è´¥

## âœ… éªŒè¯é…ç½®

éƒ¨ç½²å®Œæˆåï¼Œæ£€æŸ¥æ—¥å¿—åº”è¯¥çœ‹åˆ°ï¼š
- âœ… `added X packages`
- âœ… `Success: Build command completed`
- âœ… `Success: Deploy command completed`
- âŒ ä¸åº”è¯¥æœ‰ç‰ˆæœ¬ä¸åŒ¹é…é”™è¯¯
- âŒ ä¸åº”è¯¥æœ‰ "npm å®‰è£…" å‘½ä»¤æœªæ‰¾åˆ°çš„é”™è¯¯

## ğŸ“‹ å®Œæ•´é…ç½®æ¸…å•

è¯·ç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é…ç½®ï¼š

- [ ] Framework preset: `None`
- [ ] æ„å»ºå‘½ä»¤: `npm install --force` âœ…ï¼ˆå¿…é¡»æ˜¯è‹±æ–‡ï¼‰
- [ ] æ„å»ºè¾“å‡ºç›®å½•: `.` âœ…
- [ ] æ ¹ç›®å½•: `/` âœ…
- [ ] éƒ¨ç½²å‘½ä»¤: `echo "æ­£åœ¨é€šè¿‡ Cloudflare Pages è‡ªåŠ¨éƒ¨ç½²è¿›è¡Œéƒ¨ç½²"` âœ…
- [ ] éç”Ÿäº§åˆ†æ”¯éƒ¨ç½²å‘½ä»¤: `echo "Deploying preview..."` âœ…

